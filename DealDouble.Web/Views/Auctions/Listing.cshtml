@model List<DealDouble.Entities.Auction>

@{
    Layout = null;
}
<div>
    <button id="btnNew"> New Auction </button>
</div>

<h2>All Auctions</h2>

<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Picture URL</th>
            <th>Description</th>
            <th>Actual Amount</th>
            <th>Starting Time</th>
            <th>End Time</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <span hidden>@item.ID</span>@item.Title
                </td>
                <td>@item.PictureURL</td>
                <td>@item.Description</td>
                <td>@item.ActualAmount</td>
                <td>@item.StartingTime</td>
                <td>@item.EndTime</td>
                <td><button class="btnEdit" data-ID="@item.ID">Edit</button></td>
                <td><button class="btnDelete" data-ID="@item.ID">Delete</button></td>
            </tr>
        }

    </tbody>
</table>

<script>
    
    $("#btnNew").on("click", function() {

        $.ajax({
            type: "GET",
            url: "/Auctions/Create/",
            success: function (response) {
                $(".actionArea").html(response);
            },
            error: function (response) {
                alert("Failed to load");
            }

        });

    });



    $(".btnEdit").click(function () {
        
        $.ajax({
            type: 'GET',
            url: '/Auctions/Edit',
            data: {
                ID: $(this).attr('data-ID')
            }
        })
            .done(function (response) {
                $(".actionArea").html(response);
               
            })
            .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Fail");
            });
    });

    $(".btnDelete").click(function () {

        $.ajax({
            type: 'GET',
            url: '/Auctions/Delete',
            data: {
                ID: $(this).attr('data-ID')
            }
        })
            .done(function (response) {
                $(".actionArea").html(response);

            })
            .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Fail");
            });
    });

</script>